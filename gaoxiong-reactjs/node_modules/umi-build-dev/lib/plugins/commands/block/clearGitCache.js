"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = clearGitCache;

var _rimraf = _interopRequireDefault(require("rimraf"));

var _ora = _interopRequireDefault(require("ora"));

var _download = require("./download");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 清理 git 缓存目录
 * @param {*} args
 * @param {*} log
 */
function clearGitCache(args, {
  log
}) {
  const spinner = (0, _ora.default)();
  const blocksTempPath = (0, _download.makeSureMaterialsTempPathExist)(args.dryRun);
  spinner.start(`🗑  start clear: ${blocksTempPath}`);
  (0, _rimraf.default)(blocksTempPath, error => {
    if (error) {
      log.error(error);
      spinner.stop();
      return;
    }

    spinner.succeed();
  });
}